<!-- TODO: поменять кнопку ресет
TODO: добавить стрелку на тип жалюзей
TODO: подсказка на катеогрию
TODO: добавить отдельную дверь
*TODO: выравнивание текста для длинного названия-->

<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link rel='stylesheet' href='lib/style.css' />
    <script src="lib/handlers.js"></script>
    <script src="lib/priceDB.js" defer></script>
    <script src='lib/SizeDB.js'></script>
    <script src='lib/zDB.js'></script>
    <script src='lib/stateloader.js'></script>
    <script src='lib/animation.js'></script>
    <script src='lib/main.js'></script>
    <script>
        function loadScript(src, callback) {
            let script = document.createElement("script");
            script.src = src;
            document.head.append(script);
            script.onload = () => callback(script);
        }
        // async function loadDB() {
        //     const script = document.createElement('script');
        //     const DB = ['lib/priceDB.js', 'lib/SizeDB.js', 'lib/funcprice.js', 'lib/zDB.js'];
        //     DB.forEach(src => {
        //         script.src = await src;
        //         document.head.append(script)
        //     })
        // }
    </script>
    <script defer>
        const scripts = [
            "lib/funcprice.js",
            "lib/Selector.js",
            "lib/mapper.js",
            "lib/zstorage.js",
            "lib/model.js",
            "lib/testing.js",
        ];

        function load(src) {

            let script = document.createElement("script");
            script.src = src;
            // script.onload = () => console.log(`${script.src} Loaded`);
            document.head.append(script);
        };

        function loader() {
            for (let i = 0; i < scripts.length; i++) {
                load(scripts[i]);
            };
            console.log(`${scripts.length} scripts loaded`);
        }

        stylelog("HTML IS READY");
    </script>

    <script defer>
        loader()
        // loadDB()
    </script>

    <title>Калькулятор жалюзей</title>
</head>

<body>
    <div>
        <h1 class="tooltip">ЖАЛЮЗИ</h1> <span class="tooltiptext">Рассчет жалюзей по профилю</span>
    </div>
    <!-- *Header: кнопки смены профильной системы, толщины ст-п, типа и цвета жалюзи а также их группа и, наконец, кнопка расчета -->
    <header class="head">
        <div class="headcont">

            <div class="head-item">
                <select name="veka" id="prof" oninput="td()" onclick="td()" data-stls="system" data-loadstate="system">
                    <optgroup label="Основные">
                        <option value="Proline" selected>Proline Comfort 70мм</option>
                        <option value="Softline">Softline ComfortPlus 70мм</option>
                        <option value="Premium82">Softline Premium 82мм</option>
                        <option value="Euroline">Euroline 58мм</option>
                    </optgroup>
                    <optgroup label="Бюджетные">
                        <option value="WHS72">WHS72 StandartPlus 72мм</option>
                        <option value="WHS60">WHS60 60мм</option>
                    </optgroup>
                    <optgroup label="Выведеные из оборота">
                        <option value="BasicPlus">Базовый+ 70мм</option>
                        <option value="Lux">Люкс 70мм</option>
                        <option value="Optima">Оптима 60мм</option>
                        <option value="TermoPlus">Термоплюс 80мм</option>
                    </optgroup>
                </select>

                <select name="glass-depth" id="gdepth" class="gldepth" onclick="this.style.opacity = 1"
                    data-stls="gdepth" data-loadstate="gdepth">
                    <option class="odepth" value="28" selected>28 mm</option>
                    <option class="odepth" value="24">24 mm</option>
                    <option class="odepth" value="30">30 mm</option>
                    <option class="odepth" value="32">32 mm</option>
                    <option class="odepth" value="36">36 mm</option>
                    <option class="odepth" value="38">38 mm</option>
                    <option class="odepth" value="40">40 mm</option>
                    <option class="odepth" value="52">52 mm</option>
                </select>
            </div>

            <div class="head-item ztypebtn" id="ztype" onclick="tt()" data-stls="ztype" data-loadstate="ztype">Isolite
            </div>

            <select tabindex="5" class="head-item" name="zlist" id="zlist" placeholder="Цвет" onclick="setgr()"
                data-stls="zcolor" data-loadstate="zcolor">
            </select>
            <span class="resetv zc" onclick="resetvals()">&#9746;</span>

            <div id="zgrp" class="head-item"></div>

            <button class="calc-btn hand-item" id="calc-btn">Рассчитать</button>

        </div>


    </header>

    <div class="disc abs">
        <label for="discount"><span>Скидка:</span>
            <input type="number" name="discount" id="discount" min="0" max="90" step="1" value="40"
                data-stls="discount">%
        </label>
        <label for="isdisc" class="usedisc"><input type="checkbox" name="usedisc" id="isdisc" data-stls="discount">
            Считать со скидкой?</label>
    </div>

    <div id="cfgbox" class="cfg-gridbox">
        <div class="cfg-item" data-cfg="fff" onclick="resizeWin('fff')" data-loadstate="fff"><span>Трешка</span> </div>
        <div class="cfg-item" data-cfg="ff" onclick="resizeWin('ff')" data-loadstate="ff"><span> Двушка </span></div>
        <div class="cfg-item" data-cfg="f" onclick="resizeWin('f')" data-loadstate="f"><span>Адынушка</span></div>
        <!-- <div class="cfg-item" data-cfg="d" onclick="resizeWin('d')" data-loadstate="d"><span>Дверка</span></div> -->
        <div class="cfg-item" data-cfg="d-f" onclick="resizeWin('df')" data-loadstate="df"><span>Б/Блок-1</span></div>
        <div class="cfg-item" data-cfg="d-ff" onclick="resizeWin('dff')" data-loadstate="dff"><span>Б/Блок-2</span>
        </div>
        <div class="cfg-item" data-cfg="f-d-f" onclick="resizeWin('fdf')" data-loadstate="fdf"><span>Чебурашка</span>
        </div>
    </div>

    <!-- *цвет короба-->
    <div class="ktype" id="korob" oninput="setgr()">
        <b>Цвет короба: </b>
        <input type="radio" value="white" id="whiteK" name="KorColor" checked>
        <label for="whiteK">Белый</label>
        <input type="radio" value="lamin" id="laminK" name="KorColor" class="show">
        <label for="laminK" class="show">золото/махагон</label>
        <input type="radio" value="color" id="colorK" name="KorColor">
        <label for="colorK">Kоричневый/бежевый/серебро</label>
    </div>
    <!--*контейнер для кнопок право-лево, картинки рамы и створок, ввод размеров-->
    <div class="cont" id="maincont">

        <!--! BACKGROUNF FON IMG-->
        <div class="imgbox" id="imgbox" data-isbb="false" data-rama-step="3" wintype="fff">
            <img src="img/fff.svg" alt="nope" class="fon" id="fon" data-rama-step="3" wintype="fff" data-stls="wintype"
                data-loadstate="wintype">
            <img src="img/s3.svg" alt="nope" class="s1 anim" id="s1" onclick="opaopa(s1)" data-isfix="1">
            <img src="img/s3.svg" alt="nope" class="s2 anim" id="s2" onclick="opaopa(s2)" data-isfix="1">
            <img src="img/s3.svg" alt="nope" class="s3 anim" id="s3" onclick="opaopa(s3)" data-isfix="1">
            <img src="img/door-imp.svg" alt="nope" class="sd anim" id="sd" onclick="opaopa(sd)" data-isfix="1">

            <div class="sizebox" id="sizebox">
                <input type="text" tabindex="3" class="size" name="sizes" id="levo" min="0" placeholder="лево"
                    autocomplete="on">
                <input type="text" tabindex="4" class="size" name="sizes" id="pravo" min="0" placeholder="право"
                    autocomplete="on">
                <input type="text" tabindex="1" class="size" name="sizes" id="h" min="0" placeholder="высота"
                    autocomplete="on">
                <input type="text" tabindex="2" class="size" name="sizes" id="w" min="0" placeholder="ширина"
                    autocomplete="on">
                <input type="text" tabindex="6" class="size" name="sizes" id="hpr" min="0" placeholder="высота пр"
                    autocomplete="on">
                <input type="text" tabindex="7" class="size" name="sizes" id="hlv" min="0" placeholder="высота лев"
                    autocomplete="on">
                <input type="text" tabindex="5" class="size" name="sizes" id="himp" min="0" placeholder="импоста"
                    autocomplete="on">
            </div>
            <script>
                restoreInputs()
                load('zApp.js')
            </script>
        </div>

        <div class="current">
            <div id="outside">
            </div>
        </div>
    </div>
    <!--!кнопка СБРОС-->
    <img src="img/reset.jpg" alt="reset" id="reset" class="resbtn" onclick="fullreset()">

    <div class="show_inst abs" id="showinst" style="top:700px; left:10px"></div>
    <div class="btn__cont" id="btn__cont">
        <div class="btn__thumb" data-calc-state="close" onclick="toggle_rs_calc(this)"></div>
    </div>


    <img src="img/devbtn.jpg" alt="reset" id="show_calc" class="resbtn" onclick="toggleCalc()">

    <div class="rs__maincalc" id="rs__calc" data-rs-calc="hide">

    </div>
    <script>
        addListener();
        td();
        tt();
        // tl();
        listSelector();
        setgr()
        // showdisc();
    </script>
    <div class="exptab">
        <table>
            <tr>
                <td>1</td>
                <td>Rollite</td>
                <td>Аллегро(2.0)</td>
                <td>белый</td>
                <td>504</td>
                <td>1396</td>
                <td>10</td>
                <td></td>
                <td>1340</td>
                <td></td>
                <td></td>
                <td>1</td>
                <td></td>
                <td>2735</td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>

</body>

</html>